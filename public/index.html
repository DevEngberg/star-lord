<!doctype html>
<html class="no-js" lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Project II | Welcome</title>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <link rel="stylesheet" href="https://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.min.css">
  <link rel="stylesheet" href="./assets/css/foundation.css">
  <link rel="stylesheet" href="./assets/css/app.css">
</head>

<body>

  <div class="top-bar">
    <div class="top-bar-left">
      <ul class="menu">
        <li class="menu-text">Space Events Site</li>
        <li><a href="#">One</a></li>
        <li><a href="#">Two</a></li>
      </ul>
    </div>
    <div class="top-bar-right">
      <ul class="menu">
        <li><a href="#">Three</a></li>
        <li><a href="#">Four</a></li>
        <li><a href="#">Five</a></li>
        <li><a href="#">Six</a></li>
      </ul>
    </div>
  </div>


  <div class="row column text-center">
    <h2>Choose Your Favorite Space Events!</h2>
    <hr>
  </div>

  <div class="row">

    <div class="columns small-6">

      <table class="hover" id="events-table">
        <thead>
          <tr>
            <th width="200">Event</th>
            <th>Date</th>
            <!-- <th width="150">Table Header</th> -->
            <!-- <th width="150">Table Header</th> -->
          </tr>
        </thead>
        <tbody>

        </tbody>
      </table>

    </div>



    <div class="columns small-6">
      <div class="card" style="width: 300px;" id="favorites-table">
        <div class="card-divider">
          Favorited Events
        </div>
        <img src="./assets/images/rectangle-1.webp">
        <div class="card-section">
          <table class="hover">
            <thead>
              <tr>
                <th width="200">Event</th>
                <th>Date</th>
                <!-- <th width="150">Table Header</th>
            <th width="150">Table Header</th> -->
              </tr>
            </thead>
            <tbody>

            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>


  <footer>
    <div class="row column text-center">
      Copyright &copy;
      <script type="text/javascript">
        document.write(new Date().getFullYear());
      </script>, coffeeCoders. All Rights Reserved.
    </div>
  </footer>



  <script type="text/javascript">

    $.get("/api/events", function (data) {
      console.log(data);

      for (var i = 0; i < data.length; i++) {

      $("#events-table").append("<tr><td id='fav-title data-id="+ data[i].id + ">" + data[i].title + "</td><td id='fav-date'>" + data[i].date + "</td><td>" + '<button type="button" class="hollow button success" id="fav-btn">Select</button>' + "</td></tr>");
      };

    });

    

      $("#fav-btn").on("click", function (event) {
        var newFavorite = {
          title: $("#fav-title").val().trim(),
          date: $("#fav-date").val().trim(),
          id: $("#fav-title").val().trim(),
          favorited: true
        };
        $("favorites-table").append("<tr><td>" + newFavorite.title + "</td><td>" + newFavorite.date + "</td></tr>");

        $.ajax(
          {
            url: "/api/events/", 
            type: "PUT",
            data: newFavorite, 
          });
        
        event.preventDefault();
      });


    
    
    });






  </script>





  <script src="https://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.js"></script>
  <script src="./assets/js/vendor/jquery.js"></script>
  <script src="./assets/js/vendor/what-input.js"></script>
  <script src="./assets/js/vendor/foundation.js"></script>
  <script src="./assets/js/app.js"></script>
  <script>
    $(document).foundation();
  </script>
</body>

</html>